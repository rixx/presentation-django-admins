(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{259:function(e,t,n){e.exports=n.p+"assets/img/django.1d528e2c.png"},305:function(e,t,n){e.exports=n.p+"assets/img/django_fuer_admins.8415327c.png"},306:function(e,t,n){e.exports=n.p+"assets/img/rixx.4b2af208.png"},307:function(e,t,n){e.exports=n.p+"assets/img/django_releases.e844db08.png"},308:function(e,t,n){e.exports=n.p+"assets/img/postgres.e1f0fbd2.svg"},309:function(e,t,n){e.exports=n.p+"assets/img/mariadb.b5b2b539.svg"},310:function(e,t,n){e.exports=n.p+"assets/img/mysql.49f7d093.svg"},311:function(e,t,n){e.exports=n.p+"assets/img/sqlite.79d07348.svg"},312:function(e,t,n){e.exports=n.p+"assets/img/oracle.fb516258.png"},315:function(e,t,n){"use strict";n.r(t);var a=n(2),s=Object(a.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("slide",[a("small",[a("p",[e._v("Press s to see the speaker notes.")]),e._v(" "),a("br"),e._v(" "),a("p",[a("a",{attrs:{href:"https://media.ccc.de/v/eh19-198-django-fr-admins",target:"_blank",rel:"noopener noreferrer"}},[e._v("Find the recording here."),a("OutboundLink")],1)])])]),e._v(" "),a("slide",{attrs:{id:"first"}},[a("figure",[a("img",{attrs:{src:n(305),alt:"Django"}})]),e._v(" "),a("notes",[a("p",[e._v("Die Pr√§sentation geht auf Django-Grundprinzipen und Erfahrungswerte im Deployment ein.")]),e._v(" "),a("p",[e._v("Sie ist prim√§r f√ºr Admins von Django-basierten Projekten, aber auch f√ºr Entwickelnde gedacht.")])])],1),a("slide",[a("div",{attrs:{id:"me"}},[a("figure",[a("img",{attrs:{src:n(306),alt:"rixx"}})]),e._v(" "),a("h3",{attrs:{id:"rixx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rixx","aria-hidden":"true"}},[e._v("#")]),e._v(" rixx")])]),e._v(" "),a("p",[e._v("üó∫ rixx.de ¬∑ üê¶ @rixxtr ¬∑ üêò @rixx@chaos.social")]),e._v(" "),a("notes",[a("p",[e._v("Ich bin rixx. Ich bin ein Django-Entwickler (habe kleine/mittlere/gro√üe Projekte entwickelt) und betreibe eigene und\nfremde Django-Projekte in Produktion. Ich bin auch aktiv in der Django-Community, habe zu Django selber (und zum\n√ñkosystem) beigetragen, und 2018 die DjangoCon Europe in Heidelberg ausgerichtet.")])])],1),a("slide",[a("slide",[a("figure",[a("img",{attrs:{src:n(259),alt:"Django"}})]),e._v(" "),a("notes",[a("p",[e._v("Django ist ein sehr stabiles, schon gut abgehangenes (+10 Jahre) Web-Framework in Python. Durch sein Alter ist viel\nStabilit√§t gew√§hrleistet, so gibt es etwa eine Stiftung hinter Django, die DSF, die ein bis zwei Fellows einstellt, die\nsich um Releases und das Management der Issues und Pull Requests k√ºmmern.")])])],1),a("slide",[a("div",{attrs:{id:"full-image"}},[a("figure",[a("img",{attrs:{src:n(307),alt:"releases"}})])]),e._v(" "),a("notes",[a("p",[e._v("Auch die Updates und der Support f√ºr einzelne Versionen, sowie f√ºr Abh√§ngigkeiten wie Datenbankversionen sind klar\ngeregelt. LTS-Versionen sind f√ºr drei Jahre unterst√ºtzt. Sicherheitsupdates werden √ºber eine private Adresse und ein\nroutiniertes Team geregelt.")])])],1),a("slide",[a("figure",[a("img",{attrs:{src:n(259),alt:"Django"}})]),e._v(" "),a("notes",[a("p",[e._v("Wie f√ºr Web-Frameworks √ºblich, bietet Django f√ºr die Entwickelnden ein Layer zur Interaktion mit HTTP-Requests, und\nau√üerem sehr viel Funktionalit√§t etwa zur Input-Validation, zur Interaktion mit Dateisystemen, oder zum rendern von HTML\nin Templates. Der gr√∂√üte Verkaufspunkt ist aber das Datenbank-Layer (das ORM).")])])],1),a("slide",[a("h2",{attrs:{id:"manage-py"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manage-py","aria-hidden":"true"}},[e._v("#")]),e._v(" manage.py")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ python ./manage.py help\n\nType 'manage.py help <subcommand>' for help on a specific subcommand.\nAvailable subcommands:\n\n[auth]\n    changepassword\n    createsuperuser\n[django]\n    check\n    compilemessages\n    createcachetable\n    dbshell\n    diffsettings\n    dumpdata\n    flush\n    inspectdb\n    loaddata\n    makemessages\n    makemigrations\n    migrate\n    ‚Ä¶\n")])])]),a("notes",[a("p",[e._v("Interaktionen mit Django passieren prim√§r via "),a("code",[e._v("python manage.py <befehl>")]),e._v(". Der "),a("code",[e._v("help")]),e._v("-Befehl dokumentiert die Befehle\ngut. Sehr n√ºtzlich z.B.: "),a("code",[e._v("manage.py dbshell")]),e._v(", liest die Verbindungskonfig zur Datenbank und √∂ffnet dann eine\nDatenbankshell.")])])],1)],1),a("slide",[a("slide",[a("h1",{attrs:{id:"datenbank"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#datenbank","aria-hidden":"true"}},[e._v("#")]),e._v(" Datenbank")]),e._v(" "),a("div",{attrs:{id:"db-logos"}},[a("p",[a("fragment",[a("img",{attrs:{src:n(308),alt:"Postgres"}})]),e._v(" "),a("fragment",[a("img",{attrs:{src:n(309),alt:"Mariadb"}})]),e._v(" "),a("fragment",[a("img",{attrs:{src:n(310),alt:"MySQL"}})]),e._v(" "),a("fragment",[a("img",{attrs:{src:n(311),alt:"SQLite"}})]),e._v(" "),a("fragment",[a("img",{attrs:{src:n(312),alt:"Oracle"}})])],1)]),e._v(" "),a("notes",[a("p",[e._v("F√ºr weitere DBs gibt es Adapter-Bibliotheken (z.B. MSSQL), die aber oft etwas weniger m√§chtig sind als der\nFunktionsumfang in Django. Django normalisiert soweit es geht Unterschiede zwischen Datenbanken weg ‚Äì dh der Umstand,\ndass die meisten Entwickelnden der Bequemlichkeit halber gegen SQLite testen, kann in Produktion zu √úberraschungen\nsorgen. Pers√∂nliche Empfehlung, aus Prinzip: Postgres.")])])],1),a("slide",[a("h1",{attrs:{id:"migrationen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrationen","aria-hidden":"true"}},[e._v("#")]),e._v(" Migrationen")]),e._v(" "),a("div",{attrs:{id:"migrate-code"}},[a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ python manage.py migrate\n\nOperations to perform:\n  Apply all migrations: auth, authtoken, contenttypes, myapp, sessions\nRunning migrations:\n  No migrations to apply.\n")])])]),a("fragment",[a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  Your models have changes that are not yet reflected in a migration, and so won't be applied.\n  Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.\n")])])])])],1),e._v(" "),a("notes",[a("p",[e._v('Entwickelnde schreiben "Modelle", die Tabellen in Datenbanken entsprechen. Migrationen (in\n'),a("code",[e._v("migrations/<zahl>_<titel>.py")]),e._v(") bilden √Ñnderungen an Modellen ab, und werden von Django beim Ausf√ºhren von "),a("code",[e._v("migrate")]),e._v(" in\nden passenden SQL-Dialekt √ºbersetzt und ausgef√ºhrt. "),a("code",[e._v("showmigrations")]),e._v(" zeigt den aktuellen Stand. Fehler sind fixbar\n(insbesondere dank "),a("code",[e._v("--fake")]),e._v("), aber nervig.")]),e._v(" "),a("p",[e._v("DO NOT RUN MAKEMIGRATIONS. It's like git push -f.")])])],1)],1),a("slide",[a("slide",[a("h2",{attrs:{id:"dateien"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dateien","aria-hidden":"true"}},[e._v("#")]),e._v(" Dateien")]),e._v(" "),a("p",[a("fragment",[e._v("media")]),e._v(" vs "),a("fragment",[e._v("static")])],1),e._v(" "),a("notes",[a("p",[e._v("Media-Files: User-uploaded, oder von Django generiert. Auslieferung nicht via Django, sondern via den vorgeschalteten\nWebserver. Redet mit den Entwickelnden, ob wirklich alle Media-Files einfach public sein sollen. Sonst: Sch√ºtzenswerte\nunter sub-path, den im Web-Server nicht ausliefern, und die Entwicklung muss daf√ºr Authorisierung bauen.")])])],1),a("slide",[a("h2",{attrs:{id:"dateien-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dateien-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Dateien")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ python ./manage.py collectstatic\n\nYou have requested to collect static files at the destination\nlocation as specified in your settings:\n\n    /home/myproject/src/myproject/src/static.dist\n\nThis will overwrite existing files!\nAre you sure you want to do this?\n\nType 'yes' to continue, or 'no' to cancel: yes\n\n496 static files copied to '/home/myproject/src/myproject/src/static.dist', 517 post-processed.\n")])])]),a("notes",[a("p",[e._v("Statische Dateien sind JS, CSS, Bilder, usw. "),a("code",[e._v("collectstatic")]),e._v(" laufen lassen, dann einfach ausliefern -- au√üer das Projekt\nsetzt "),a("code",[e._v("whitenoise")]),e._v(" ein, dann werden die statischen Dateien von Django ausgeliefert. M√∂glicherweise wird auch noch etwas\nzur Komprimierung der Dateien eingesetzt, dann muss nach "),a("code",[e._v("collectstatic")]),e._v(" noch "),a("code",[e._v("compress")]),e._v(" laufen.")])])],1)],1),a("slide",[a("h2",{attrs:{id:"installation-umgebung"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-umgebung","aria-hidden":"true"}},[e._v("#")]),e._v(" Installation: Umgebung")]),e._v(" "),a("ul",[a("fragment",[a("li",[e._v("Global")])]),e._v(" "),a("fragment",[a("li",[e._v("User environment / "),a("code",[e._v("pip install --user")])])]),e._v(" "),a("fragment",[a("li",[e._v("Virtualenv / "),a("code",[e._v("python -m venv")])])])],1),e._v(" "),a("notes",[a("p",[e._v("Bitte nicht im globalen Kontext (was "),a("code",[e._v("pip")]),e._v("-Default ist) Projekte installieren. Stattdessen entweder das √ºbliche\nvirtualenv, oder das noch coolere "),a("code",[e._v("pip install --user")]),e._v(" nehmen.")])])],1),a("slide",[a("slide",[a("h2",{attrs:{id:"installation-nutzliche-pfade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-nutzliche-pfade","aria-hidden":"true"}},[e._v("#")]),e._v(" Installation: N√ºtzliche Pfade")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("/usr/lib/python3.6/site-packages/")])]),e._v(" "),a("li",[a("code",[e._v("~/.local/lib/python3.6/site-packages/")])]),e._v(" "),a("li",[a("code",[e._v("/path/to/venv/lib/python3.6/site-packages/")])])]),e._v(" "),a("notes",[a("p",[e._v("In diesen Pfaden finden sich je nach Installationsmechanismus die installierten Pakete.")])])],1),a("slide",[a("h2",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),a("ul",[a("fragment",[a("li",[a("code",[e._v("pip install myproject")])])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("pip install .")])])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("pip install -r requirements.txt")])])])],1),e._v(" "),a("notes",[a("p",[e._v("Egal welcher dieser Befehle der richtige f√ºr euer Projekt ist, bitte guckt in die betreffende Datei ("),a("code",[e._v("setup.py")]),e._v(" oder\n"),a("code",[e._v("requirements.txt")]),e._v(", √ºblicherweise) und seht zu, ob Dependencies fix sind. Empfehlung: mindestens auf minor version\npinnen, entweder durch "),a("code",[e._v("dep>=5.3,<5.4")]),e._v(" oder durch "),a("code",[e._v("dep==5.3.*")]),e._v(".")])])],1)],1),a("slide",[a("slide",[a("h2",{attrs:{id:"konfiguration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#konfiguration","aria-hidden":"true"}},[e._v("#")]),e._v(" Konfiguration")]),e._v(" "),a("ul",[a("fragment",[a("li",[a("code",[e._v("local_settings.py")])])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("settings.py")])])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("something.cfg")])])]),e._v(" "),a("fragment",[a("li",[e._v("ENV")])])],1),e._v(" "),a("notes",[a("p",[e._v("Es gibt einen Haufen Config-Ans√§tze, aber keinen pr√§valenten. Scheut nicht davor zur√ºck, der Entwicklung eure\nW√ºnsche/Bed√ºrfnisse mitzuteilen. Falls es wirklich gar nichts gibt, legt eine "),a("code",[e._v("local_settings.py")]),e._v(" neben die\n"),a("code",[e._v("settings.py")]),e._v(" und importiert sie "),a("strong",[e._v("am Ende")]),e._v(" der "),a("code",[e._v("settings.py`` mit")]),e._v("from .local_settings import *"),a("code",[e._v(", dann m√ºsst ihr in der")]),e._v("settings.py` bei Updates immerhin nur noch die eine Zeile pflegen.")])])],1),a("slide",[a("h2",{attrs:{id:"konfigurationsvariablen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#konfigurationsvariablen","aria-hidden":"true"}},[e._v("#")]),e._v(" Konfigurationsvariablen")]),e._v(" "),a("div",{attrs:{id:"config-code"}},[a("fragment",[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("DEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("False")]),e._v("\n")])])])]),e._v(" "),a("fragment",[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("SECRET_KEY "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'skjdf√∂lajfalskjfdsa√∂lk‚Ä¶'")]),e._v("\n")])])])]),e._v(" "),a("fragment",[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("ALLOWED_HOSTS "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'example.org'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'172.0.0.21'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])])]),e._v(" "),a("fragment",[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("DATABASES "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'ENGINE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'django.db.backends.postgresql'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'NAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'myproject'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'USER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" ‚Ä¶\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),a("fragment",[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("STATIC_ROOT "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/var/www/project/static/'")]),e._v("\nMEDIA_ROOT "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/var/www/project/media/'")]),e._v("\n")])])])])],1),e._v(" "),a("notes",[a("p",[e._v("DEBUG muss falsch sein, egal, was ihr sonst tut.")])])],1),a("slide",[a("h2",{attrs:{id:"konfigurationsvariablen-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#konfigurationsvariablen-proxy","aria-hidden":"true"}},[e._v("#")]),e._v(" Konfigurationsvariablen: Proxy")]),e._v(" "),a("div",{attrs:{id:"config-code"}},[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("SECURE_PROXY_SSL_HEADER "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'HTTP_X_FORWARDED_PROTO'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nSECURE_SSL_REDIRECT "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("False")]),e._v("\nUSE_X_FORWARDED_HOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("True")]),e._v("\nUSE_X_FORWARDED_PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("True")]),e._v("\n")])])])]),e._v(" "),a("notes",[a("p",[e._v("Denkt daran, diese Header in eurem Server zu setzen, und sicherzustellen, dass ihr keine von Endusern eingereichten\nWerte f√ºr diese Header durchlasst. Handhabt Redirects auf HTTPS auch auf eurer Seite, nicht in Django.")])])],1),a("slide",[a("h2",{attrs:{id:"bonus-mail-debugging"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bonus-mail-debugging","aria-hidden":"true"}},[e._v("#")]),e._v(" Bonus: Mail-Debugging")]),e._v(" "),a("div",{attrs:{id:"config-code"}},[a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[e._v("ADMINS "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Admin1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'me@admin.org'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Admin2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'me@example.org'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\nEMAIL_HOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\nEMAIL_HOST_PASSWORD "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\nEMAIL_HOST_USER "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\nEMAIL_PORT "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("25")]),e._v("\nEMAIL_USE_TLS "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("True")]),e._v("\nEMAIL_USE_SSL "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("False")]),e._v("\nSERVER_EMAIL "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'sender@example.org'")]),e._v("\nLOGGING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'handlers'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'mail_admins'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'level'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'ERROR'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'django.utils.log.AdminEmailHandler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),a("notes",[a("p",[e._v("Diese Konfig sendet Mails an euch, wenn der Server einen unerwarteten HTTP 500 zur√ºckgibt. Die Mail enth√§lt einen\nkompletten Traceback. Achtung vor Mailspam, aber trotzdem ist es irre n√ºtzlich, um den Entwickelnden brauchbares\nFeedback bei Fehlern zukommen zu lassen.")])])],1)],1),a("slide",[a("h2",{attrs:{id:"services"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#services","aria-hidden":"true"}},[e._v("#")]),e._v(" Services")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pip install gunicorn\n")])])]),a("p"),e._v(" "),a("div",{attrs:{id:"config-code"}},[a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Unit]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("Requires")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("myproject.socket")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("After")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("network.target")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Service]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("User")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("myproject")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("WorkingDirectory")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("/home/myproject/src")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("/home/myproject/.local/bin/gunicorn --bind unix:/run/gunicorn/myproject --workers 4 myproject.wsgi")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("ExecReload")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("/bin/kill -s HUP $MAINPID")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[e._v("ExecStop")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("/bin/kill -s TERM $MAINPID")]),e._v("\n")])])])]),e._v(" "),a("notes",[a("p",[e._v("Gunicorn ist besser als uwsgi, aber beide funktionieren, und leiten HTTP-Requests im f√ºr Django brauchbaren WSGI-Format\nweiter. Systemd-Servicefile hier nur als Beispiel.")])])],1),a("slide",[a("slide",[a("h2",{attrs:{id:"maintenance-backups"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-backups","aria-hidden":"true"}},[e._v("#")]),e._v(" Maintenance: Backups")]),e._v(" "),a("ul",[a("li",[e._v("Datenbank")]),e._v(" "),a("li",[e._v("Mediafiles")]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("site-packages")])])])],1),e._v(" "),a("notes",[a("p",[e._v("Site-packages nur ins Backup, wenn ihr einen reproducible build (as in: 100%, jede Abh√§ngigkeit) braucht.")])])],1),a("slide",[a("h2",{attrs:{id:"maintenance-updates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-updates","aria-hidden":"true"}},[e._v("#")]),e._v(" Maintenance: Updates")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("pip install (--user) -U ‚Ä¶")])]),e._v(" "),a("li",[a("code",[e._v("python ./manage.py migrate")])]),e._v(" "),a("li",[a("code",[e._v("python ./manage.py collectstatic")])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("python ./manage.py compress")])])]),e._v(" "),a("fragment",[a("li",[a("code",[e._v("python ./manage.py compilemessages")])])])],1),e._v(" "),a("notes",[a("p",[e._v("Backups vor Updates nicht vergessen.")])])],1),a("slide",[a("h2",{attrs:{id:"maintenance-cronjobs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-cronjobs","aria-hidden":"true"}},[e._v("#")]),e._v(" Maintenance: Cronjobs")]),e._v(" "),a("ul",[a("li",[e._v("Manage commands")]),e._v(" "),a("li",[a("code",[e._v("python ./manage.py clearsessions")])])]),e._v(" "),a("notes",[a("p",[a("code",[e._v("clearsessions")]),e._v(" alle Woche oder einmal im Monat ausf√ºhren, wirft abgelaufene Sessions aus der DB. Alle anderen Cronjobs\nsollten auch Manage-commands (dh √ºber manage.py ausf√ºhrbar) sein. Wenn nicht, sind die Chancen gro√ü, dass die\nEntwicklenden das h√§tten machen sollen.")])])],1),a("slide",[a("h2",{attrs:{id:"ressourcen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ressourcen","aria-hidden":"true"}},[e._v("#")]),e._v(" Ressourcen")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://docs.djangoproject.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Django Docs!"),a("OutboundLink")],1)]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.djangoproject.com/download/#supported-versions",target:"_blank",rel:"noopener noreferrer"}},[e._v("Supported versions"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.djangoproject.com/rss/weblog/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Security releases"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.djangoproject.com/en/dev/ref/settings/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Settings"),a("OutboundLink")],1)])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://media.ccc.de/v/eh19-198-django-fr-admins",target:"_blank",rel:"noopener noreferrer"}},[e._v("Recording"),a("OutboundLink")],1)])])],1)],1)},[],!1,null,null,null);t.default=s.exports}}]);